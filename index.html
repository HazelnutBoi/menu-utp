<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Menú UTP</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
      :root {
        --utp-purple: #6a0dad;
      }
      header {
        background: var(--utp-purple);
      }
    </style>
</head>
<body class="font-roboto p-5 bg-gray-100 text-gray-800">
    <header class="text-white p-4 text-center flex items-center justify-center shadow-md mb-8">
      <img src="logo_utp.png" alt="Logo UTP" class="h-12 mr-4">
      <h2 class="text-2xl font-bold">Menú UTP</h2>
    </header>

    <div id="loading" class="text-center text-xl text-gray-500">
      Cargando menú...
    </div>
    
    <table id="menuTable" class="hidden w-full border-collapse my-5 mx-auto shadow-lg bg-white rounded-lg overflow-hidden">
        <thead>
            <tr>
                <th class="p-4 border border-gray-200 text-left text-white uppercase font-bold text-lg" style="background-color: var(--utp-purple);">Descripción</th>
                <th class="p-4 border border-gray-200 text-left text-white uppercase font-bold text-lg" style="background-color: var(--utp-purple);">Precio</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

    <script>
        const firebaseConfig = {
          apiKey: "AIzaSyAMkuy8jW-uxMx9Xpq-MPmHkKsf8l7qKb8",
          authDomain: "menu-cafeteria-crpo.firebaseapp.com",
          databaseURL: "https://menu-cafeteria-crpo-default-rtdb.firebaseio.com",
          projectId: "menu-cafeteria-crpo",
          storageBucket: "menu-cafeteria-crpo.firebasestorage.app",
          messagingSenderId: "741029761582",
          appId: "1:741029761582:web:0256a9ea14385db5cd85bf",
          measurementId: "G-ZWWZVLBRTT"
        };
        
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        const menuTableBody = document.querySelector("#menuTable tbody");
        const loadingMessage = document.getElementById("loading");
        const menuTable = document.getElementById("menuTable");

        db.ref("menuHoy").on("value", (snapshot) => {
            menuTableBody.innerHTML = "";
            
            if (snapshot.exists() && snapshot.val().items) {
                snapshot.val().items.forEach(item => {
                    const row = document.createElement("tr");
                    row.innerHTML = `
                        <td class="p-4 border border-gray-200 text-lg">${item.descripcion}</td>
                        <td class="p-4 border border-gray-200 text-lg">${item.precio}</td>
                    `;
                    menuTableBody.appendChild(row);
                });
                loadingMessage.classList.add("hidden");
                menuTable.classList.remove("hidden");
            } else {
                loadingMessage.textContent = "El menú de hoy no está disponible.";
                loadingMessage.classList.remove("hidden");
                menuTable.classList.add("hidden");
            }
        });
    </script>
</body>
</html>
